{"version":3,"sources":["actions/index.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","Spinner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","loading","message","Component","connect","state","bookList","ownProps","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","items","shoppingCart","cartItems","total","orderTotal","item","idx","count","HomePage","look","CartPage","ShopHeader","countTotal","orderTatal","to","App","role","path","component","ErrorBoundry","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","value","document","getElementById"],"mappings":"uYAMMA,EAAc,SAAAC,GAClB,MAAO,CACLC,KAAM,sBACNC,QAASF,IAIPG,EAAa,SAAAC,GACjB,MAAO,CACLH,KAAM,sBACNC,QAASE,IAIPC,EAAkB,SAAAC,GACtB,MAAO,CACLL,KAAM,qBACNC,QAASI,IA0BPC,EAAa,SAACC,GAAD,OAAsB,kBAAM,SAAAC,GAC7CA,EAjDO,CACLR,KAAM,wBAiDRO,EACGE,WACAC,MAAK,SAAAC,GAAI,OAAIH,EAASV,EAAYa,OAClCC,OAAM,SAAAC,GAAG,OAAIL,EAASN,EAAWW,UCpDvBC,G,MCEM,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,cACpBC,EAAqCF,EAArCE,MAAOC,EAA8BH,EAA9BG,OAAQC,EAAsBJ,EAAtBI,MAAOC,EAAeL,EAAfK,WAC9B,OACE,yBAAKC,UAAU,kBACb,yBAAKA,UAAU,cACb,yBAAKC,IAAKF,EAAYG,IAAI,WAE5B,yBAAKF,UAAU,gBACb,0BAAMA,UAAU,cAAcJ,GAC9B,yBAAKI,UAAU,eAAeH,GAC9B,yBAAKG,UAAU,cAAf,IAA8BF,GAC9B,4BAAQK,QAASR,EAAeK,UAAU,4BAA1C,mB,ECVJI,IAAMC,gBAFEC,E,EAAVC,SACUC,E,EAAVC,SCWaC,EAZc,kBAAM,SAAAC,GACjC,OAAO,SAAAC,GACL,OACE,kBAACJ,EAAD,MACG,SAAAtB,GACC,OAAO,kBAACyB,EAAD,iBAAaC,EAAb,CAAoB1B,iBAAkBA,WCNxC2B,G,MCCC,WACd,OACE,yBAAKb,UAAU,sCACb,yBAAKA,UAAU,oBACb,6BACE,8BACA,8BACA,8BACA,8BACA,8BACA,mCCXKc,G,MCCQ,SAAC,GAAiC,IAAD,IAA/BhC,aAA+B,MAAvB,kBAAuB,EACtD,OAAO,6BAAMA,KCQTiC,G,MAAW,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,MAAOrB,EAAoB,EAApBA,cAczB,OAAO,wBAAIK,UAAU,aAAagB,EAAMC,KAbpB,SAAAvB,GAClB,OACE,wBAAIwB,IAAKxB,EAAKyB,GAAInB,UAAU,mBAC1B,kBAAC,EAAD,CACEN,KAAMA,EACNC,cAAe,WACbA,EAAcD,EAAKyB,cAUzBC,E,kLAEFC,KAAKT,MAAM3B,e,+BAGH,IAAD,EAC0CoC,KAAKT,MAA9CI,EADD,EACCA,MAAOM,EADR,EACQA,QAASxC,EADjB,EACiBA,MAAOa,EADxB,EACwBA,cAE/B,OAAI2B,EACK,kBAAC,EAAD,MAGLxC,EACK,kBAAC,EAAD,CAAgBA,MAAOA,EAAMyC,UAG/B,kBAAC,EAAD,CAAUP,MAAOA,EAAOrB,cAAeA,Q,GAhBlB6B,aC3BjBT,EDkEAL,IACbe,aApBsB,SAAAC,GACtB,MAAO,CACLV,MAAOU,EAAMC,SAASX,MACtBM,QAASI,EAAMC,SAASL,QACxBxC,MAAO4C,EAAMC,SAAS7C,UAIC,SAACK,EAAUyC,GAAc,IAC1C1C,EAAqB0C,EAArB1C,iBACR,OAAO2C,YACL,CACE5C,WAAYA,EAAWC,GACvBS,cAAeZ,GAEjBI,KAKFsC,CAA6CL,IEazCU,G,MAAqB,CACzBC,WAAYhD,EACZiD,WXzD0B,SAAAhD,GAC1B,MAAO,CACLL,KAAM,yBACNC,QAASI,IWuDXiD,SXnD8B,SAAAjD,GAC9B,MAAO,CACLL,KAAM,8BACNC,QAASI,MYnCEkD,EDqFAT,aAZS,SAAAC,GACtB,MAAO,CACLS,MAAOT,EAAMU,aAAaC,UAC1BC,MAAOZ,EAAMU,aAAaG,cASUT,EAAzBL,EA7EW,SAAC,GAMpB,IALLU,EAKI,EALJA,MACAG,EAII,EAJJA,MACAP,EAGI,EAHJA,WACAC,EAEI,EAFJA,WACAC,EACI,EADJA,SAuCA,OACE,yBAAKjC,UAAU,uBACb,0CACA,2BAAOA,UAAU,SACf,+BACE,4BACE,iCACA,oCACA,qCACA,qCACA,wCAGJ,+BAAQmC,EAAMlB,KAlDF,SAACuB,EAAMC,GAAS,IACxBtB,EAA4BqB,EAA5BrB,GAAIvB,EAAwB4C,EAAxB5C,MAAO8C,EAAiBF,EAAjBE,MAAOJ,EAAUE,EAAVF,MAC1B,OACE,wBAAIpB,IAAKC,GACP,4BAAKsB,EAAM,GACX,4BAAK7C,GACL,4BAAK8C,GACL,gCAAMJ,GACN,4BACE,4BACEnC,QAAS,WACP6B,EAAWb,IAEbnB,UAAU,kCAEV,uBAAGA,UAAU,wBAEf,4BACEG,QAAS,WACP4B,EAAWZ,IAEbnB,UAAU,kCAEV,uBAAGA,UAAU,uBAEf,4BACEG,QAAS,WACP8B,EAASd,IAEXnB,UAAU,iCAEV,uBAAGA,UAAU,0BAsBnB,yBAAKA,UAAU,SAAf,WAAgCsC,OEzDvBK,EATE,WACf,OACE,6BACE,kBAAC,EAAD,CAAUC,KAAK,SACf,kBAAC,EAAD,QCDSC,EAJE,WACf,OAAO,kBAAC,EAAD,OCFMC,G,MC2BArB,aAPS,SAAAC,GACtB,MAAO,CACLqB,WAAYrB,EAAMU,aAAaW,WAC/BC,WAAYtB,EAAMU,aAAaG,cAIpBd,EAvBI,SAAC,GAAgC,IAA9BsB,EAA6B,EAA7BA,WAAYC,EAAiB,EAAjBA,WAChC,OACE,4BAAQhD,UAAU,mBAChB,kBAAC,IAAD,CAAMiD,GAAG,KACP,yBAAKjD,UAAU,kBAAf,YAEF,kBAAC,IAAD,CAAMiD,GAAG,SACP,yBAAKjD,UAAU,iBACb,uBAAGA,UAAU,kCACZ+C,EAFH,YAEwBC,EAFxB,WCXOE,ECKH,WACV,OACE,0BAAMC,KAAK,OAAOnD,UAAU,aAC1B,kBAAC,EAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOoD,KAAK,QAAQC,UAAWR,IAC/B,kBAAC,IAAD,CAAOO,KAAK,IAAIC,UAAWV,OCXpBW,E,4MCEb5B,MAAQ,CACN6B,UAAU,G,kEAIVlC,KAAKmC,SAAS,CAAED,UAAU,M,+BAGlB,IACAA,EAAalC,KAAKK,MAAlB6B,SACAE,EAAapC,KAAKT,MAAlB6C,SAER,OAAIF,EACK,kBAAC,EAAD,MAGFE,M,GAjB+BjC,aCHrBkC,E,iDACnBpE,KAAO,CACL,CACE6B,GAAI,EACJvB,MAAO,iCACPC,OAAQ,kBACRC,MAAO,GACPC,WACE,4FAEJ,CACEoB,GAAI,EACJvB,MAAO,cACPC,OAAQ,oBACRC,MAAO,GACPC,WACE,6F,uDAIM,IAAD,OACT,OAAO,IAAI4D,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WAIPF,EAAQ,EAAKtE,QAEd,Y,aCQMyE,EApCQ,SAACrC,EAAOsC,GAC7B,QAAcC,IAAVvC,EACF,MAAO,CACLV,MAAO,GACPM,SAAS,EACTxC,MAAO,MAIX,OAAQkF,EAAOrF,MACb,IAAK,sBACH,MAAO,CACLqC,MAAO,GACPM,SAAS,EACTxC,MAAO,MAGX,IAAK,sBACH,MAAO,CACLkC,MAAOgD,EAAOpF,QACd0C,SAAS,EACTxC,MAAO,MAGX,IAAK,sBACH,MAAO,CACLkC,MAAO,GACPM,SAAS,EACTxC,MAAOkF,EAAOpF,SAGlB,QACE,OAAO8C,EAAMC,W,QChCbuC,EAAkB,SAAC7B,EAAWG,EAAMC,GACxC,OAAmB,IAAfD,EAAKE,MACD,GAAN,mBAAWL,EAAU8B,MAAM,EAAG1B,IAA9B,YAAuCJ,EAAU8B,MAAM1B,EAAM,MAGlD,IAATA,EACI,GAAN,mBAAWJ,GAAX,CAAsBG,IAGlB,GAAN,mBAAWH,EAAU8B,MAAM,EAAG1B,IAA9B,CAAoCD,GAApC,YAA6CH,EAAU8B,MAAM1B,EAAM,MAc/D2B,EAAc,SAAC1C,EAAO1C,EAAQqF,GAAc,IAElCrD,EAEVU,EAFFC,SAAYX,MAFiC,EAI3CU,EADFU,aAAgBC,EAH6B,EAG7BA,UAAWU,EAHkB,EAGlBA,WAAYR,EAHM,EAGNA,WAGnC7C,EAAOsB,EAAMsD,MAAK,qBAAGnD,KAAgBnC,KACrCuF,EAAYlC,EAAUmC,WAAU,qBAAGrD,KAAgBnC,KAGnDyF,EArBe,SAAC/E,GAA+B,IAAzB8C,EAAwB,uDAAjB,GAAI6B,EAAa,yCACe7B,EAA3DrB,UAD4C,MACvCzB,EAAKyB,GADkC,IACeqB,EAA7CE,aAD8B,MACtB,EADsB,IACeF,EAAlC5C,aADmB,MACXF,EAAKE,MADM,IACe4C,EAAdF,aADD,MACS,EADT,EAGpD,MAAO,CACLnB,KACAvB,QACA8C,MAAOA,EAAQ2B,EACf/B,MAAOA,EAAQ+B,EAAW3E,EAAKI,OAcjB4E,CAAehF,EAFlB2C,EAAUkC,GAEoBF,GAC3C,MAAO,CACLhC,UAAW6B,EAAgB7B,EAAWoC,EAASF,GAC/CxB,WAAYA,EAAasB,EACzB9B,WAAYA,EAAa7C,EAAKI,MAAQuE,IA+B3BM,EA3BY,SAACjD,EAAOsC,GACjC,QAAcC,IAAVvC,EACF,MAAO,CACLW,UAAW,GACXU,WAAY,EACZR,WAAY,GAIhB,OAAQyB,EAAOrF,MACb,IAAK,qBACH,OAAOyF,EAAY1C,EAAOsC,EAAOpF,QAAS,GAE5C,IAAK,yBACH,OAAOwF,EAAY1C,EAAOsC,EAAOpF,SAAU,GAE7C,IAAK,8BACH,IAAM4D,EAAOd,EAAMU,aAAaC,UAAUiC,MACxC,SAAA9B,GAAI,OAAIA,EAAKrB,KAAO6C,EAAOpF,WAE7B,OAAOwF,EAAY1C,EAAOsC,EAAOpF,SAAU4D,EAAKE,OAElD,QACE,OAAOhB,EAAMU,eCtDJwC,EAPC,SAAClD,EAAOsC,GACtB,MAAO,CACLrC,SAAUoC,EAAerC,EAAOsC,GAChC5B,aAAcuC,EAAmBjD,EAAOsC,KCC7Ba,EAFDC,YAAYF,EAASG,YAAgBC,MCO7C9F,EAAmB,IAAIwE,EAE7BuB,IAASC,OACP,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,EAAD,KACE,kBAACvE,EAAD,CAA0B6E,MAAOjG,GAC/B,kBAAC,IAAD,KACE,kBAAC,EAAD,UAKRkG,SAASC,eAAe,W","file":"static/js/main.52bcb0d9.chunk.js","sourcesContent":["const booksRequested = () => {\r\n  return {\r\n    type: \"FETCH_BOOKS_REQUEST\"\r\n  };\r\n};\r\n\r\nconst booksLoaded = newBooks => {\r\n  return {\r\n    type: \"FETCH_BOOKS_SUCCESS\",\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksError = error => {\r\n  return {\r\n    type: \"FETCH_BOOKS_FAILURE\",\r\n    payload: error\r\n  };\r\n};\r\n\r\nconst bookAddedToCart = bookId => {\r\n  return {\r\n    type: \"BOOK_ADDED_TO_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst bookRemovedFromCart = bookId => {\r\n  return {\r\n    type: \"BOOK_REMOVED_FROM_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst allBooksRemovedFromCart = bookId => {\r\n  return {\r\n    type: \"ALL_BOOKS_REMOVED_FROM_CART\",\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then(data => dispatch(booksLoaded(data)))\r\n    .catch(err => dispatch(booksError(err)));\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => dispatch => {  \r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then(data => dispatch(booksLoaded(data)))\r\n    .catch(err => dispatch(booksError(err)));\r\n};\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart\r\n};\r\n","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from \"react\";\r\n\r\nimport \"./book-list-item.css\";\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">Add to cart</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import React from \"react\";\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\r\n","import React from \"react\";\r\nimport { BookstoreServiceConsumer } from \"../bookstore-service-context\";\r\n\r\nconst withBookstoreService = () => Wrapped => {\r\n  return props => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {bookstoreService => {\r\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\r\n        }}\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withBookstoreService;\r\n","import Spinner from \"./spinner\";\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\nimport \"./spinner.css\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"loadingio-spinner-gear-l7wm7khgzwe\">\r\n      <div className=\"ldio-0xyblqwkh2k\">\r\n        <div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import ErrorIndicator from \"./error-indicator\";\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\nimport \"./error-indicator.css\";\r\n\r\nconst ErrorIndicator = ({error = \"Error Indicator\"}) => {\r\n  return <div>{error}</div>;\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\r\nimport BookListItem from \"../book-list-item\";\r\nimport { withBookstoreService } from \"../hoc\";\r\nimport Spinner from \"../spinner\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nimport \"./book-list.css\";\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  const renderItems = book => {\r\n    return (\r\n      <li key={book.id} className=\"list-group-item\">\r\n        <BookListItem\r\n          book={book}\r\n          onAddedToCart={() => {\r\n            onAddedToCart(book.id);\r\n          }}\r\n        />\r\n      </li>\r\n    );\r\n  };\r\n\r\n  return <ul className=\"book-list\">{books.map(renderItems)}</ul>;\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator error={error.message} />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    books: state.bookList.books,\r\n    loading: state.bookList.loading,\r\n    error: state.bookList.error\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n  const { bookstoreService } = ownProps;\r\n  return bindActionCreators(\r\n    {\r\n      fetchBooks: fetchBooks(bookstoreService),\r\n      onAddedToCart: bookAddedToCart\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport default withBookstoreService()(\r\n  connect(mapStateToProps, mapDispatchToProps)(BookListContainer)\r\n);\r\n","import BookList from \"./book-list\";\r\n\r\nexport default BookList;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart\r\n} from \"../../actions\";\r\n\r\nimport \"./shopping-cart-table.css\";\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete\r\n}) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => {\r\n              onDecrease(id);\r\n            }}\r\n            className=\"btn btn-outline-warning btn-sm\"\r\n          >\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              onIncrease(id);\r\n            }}\r\n            className=\"btn btn-outline-success btn-sm\"\r\n          >\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              onDelete(id);\r\n            }}\r\n            className=\"btn btn-outline-danger btn-sm\"\r\n          >\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{items.map(renderRow)}</tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">Total: ${total}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    items: state.shoppingCart.cartItems,\r\n    total: state.shoppingCart.orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemovedFromCart,\r\n  onDelete: allBooksRemovedFromCart\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import ShoppingCartTable from \"./shopping-cart-table\";\r\n\r\nexport default ShoppingCartTable;\r\n","import React from \"react\";\r\nimport BookList from \"../book-list\";\r\nimport ShoppingCartTable from \"../shopping-cart-table\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList look='look'/>\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\nimport ShoppingCartTable from \"../shopping-cart-table\";\r\n\r\nconst CartPage = () => {\r\n  return <ShoppingCartTable />;\r\n};\r\n\r\nexport default CartPage;\r\n","import ShopHeader from \"./shop-header\";\r\n\r\nexport default ShopHeader;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./shop-header.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ShopHeader = ({ countTotal, orderTatal }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\">\r\n        <div className=\"logo text-dark\">ReStore</div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"shopping-cart\">\r\n          <i className=\"cart-icon fa fa-shopping-cart\" />\r\n          {countTotal} items (${orderTatal})\r\n        </div>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    countTotal: state.shoppingCart.countTotal,\r\n    orderTatal: state.shoppingCart.orderTotal\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import App from \"./app\";\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\nimport \"./app.css\";\r\nimport { HomePage, CartPage } from \"../pages\";\r\nimport ShopHeader from \"../shop-header\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader />\r\n      <Switch>\r\n        <Route path=\"/cart\" component={CartPage} />\r\n        <Route path=\"/\" component={HomePage} />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorBoundry from \"./error-boundry\";\r\n\r\nexport default ErrorBoundry;\r\n","import React, { Component } from \"react\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nexport default class ErrorBoundry extends Component {\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    const { hasError } = this.state;\r\n    const { children } = this.props;\r\n\r\n    if (hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return children;\r\n  }\r\n}\r\n","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: \"Production-Ready Microservices\",\r\n      author: \"Susan J. Fowler\",\r\n      price: 32,\r\n      coverImage:\r\n        \"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg\"\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Release It!\",\r\n      author: \"Michael T. Nygard\",\r\n      price: 45,\r\n      coverImage:\r\n        \"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg\"\r\n    }\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        // if (Math.random() > 0.85) {\r\n          // reject(new Error(\"Something bad happened\"));\r\n        // } else {\r\n          resolve(this.data);\r\n        // }\r\n      }, 700);\r\n    });\r\n  }\r\n}\r\n","const updateBookList = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"FETCH_BOOKS_REQUEST\":\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case \"FETCH_BOOKS_SUCCESS\":\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    case \"FETCH_BOOKS_FAILURE\":\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const {\r\n    bookList: { books },\r\n    shoppingCart: { cartItems, countTotal, orderTotal }\r\n  } = state;\r\n\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  return {\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n    countTotal: countTotal + quantity,\r\n    orderTotal: orderTotal + book.price * quantity\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      countTotal: 0,\r\n      orderTotal: 0\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"BOOK_ADDED_TO_CART\":\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case \"BOOK_REMOVED_FROM_CART\":\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case \"ALL_BOOKS_REMOVED_FROM_CART\":\r\n      const item = state.shoppingCart.cartItems.find(\r\n        item => item.id === action.payload\r\n      );\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from \"./book-list\";\r\nimport updateShoppingCart from \"./shopping-cart\";\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\n\r\nimport reducer from \"./reducers\";\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\n\r\nimport App from \"./components/app\";\r\nimport ErrorBoundry from \"./components/error-boundry\";\r\nimport BookstoreService from \"./services/bookstore-service\";\r\nimport { BookstoreServiceProvider } from \"./components/bookstore-service-context\";\r\n\r\nimport store from \"./store\";\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <BookstoreServiceProvider value={bookstoreService}>\r\n        <Router>\r\n          <App/>\r\n        </Router>\r\n      </BookstoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}